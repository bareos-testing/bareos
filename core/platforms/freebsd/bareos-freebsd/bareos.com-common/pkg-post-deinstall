#!/bin/sh
set -e

bareos_deinstall()
{
    local COMPONENT="$1"
    echo "shutting down ${COMPONENT} ..."
    service "${COMPONENT}" status && service "${COMPONENT}" stop || echo " already stopped"
}

echo "deinstalling $PKG_NAME"
echo "post-deinstall"

case "$PKG_NAME" in
bareos.com-director)
    bareos_deinstall "bareos-dir"
    sysrc -x bareosdir_enable
    ;;

bareos.com-filedaemon)
    bareos_deinstall "bareos-fd"
    sysrc -x bareosfd_enable
    ;;

bareos.com-storage)
    bareos_deinstall "bareos-sd"
    sysrc -x bareossd_enable
    ;;
esac

echo "post-deinstall end"
